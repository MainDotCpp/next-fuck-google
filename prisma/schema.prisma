generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model AccessLog {
  id                   String   @id
  requestId            String   @unique @default(uuid())
  timestamp            DateTime @default(now())
  method               String?
  path                 String
  fullUrl              String
  queryParams          String?
  clientIp             String
  userAgent            String?
  acceptLanguage       String?
  referer              String?
  languageCheckPassed  Boolean
  language             String?
  allowedLanguages     String[]
  urlParamsCheckPassed Boolean
  urlParams            String?
  urlParamsPattern     String?
  apiCheckPassed       Boolean
  apiResponseCode      Int?
  apiResponseMessage   String?
  apiResponseSuccess   Boolean?
  apiResponseStatus    Boolean?
  apiError             String?
  apiResponseTime      Int?
  allowed              Boolean
  blockedReason        String?
  totalResponseTime    Int
  createdAt            DateTime @default(now())

  @@index([timestamp])
  @@index([clientIp])
  @@index([path])
  @@index([allowed])
  @@index([requestId])
  @@map("access_logs")
}
